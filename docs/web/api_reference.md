# API reference

<!-- Your API Reference should contain information about the endpoints of your API, and how to use them. It should also contain information about the data that is returned by your API. -->

For my Web Application I am building a front-end where I display your data, and a back-end where I manage the access to my data and a database where I store my data. My API is the only way to get access to your data. And my embedded device calls my API.
The API exist out of 8 files and every file has a certain function of data handling for in and/or out of the database.

<a href="https://gitlab.fdmci.hva.nl/IoT/2023-2024-semester-1/individual-project/iot-molenaj20/-/tree/main/web">Link to the code</a>

## API Documentation

| API Endpoint        | <div style="width:230px">Description</div>                                                                                                                                                               | <div style="width:70px">Request Method</div> | <div style="width:180px">Parameters</div>                                                       | <div style="width:200px">Success</div>                                                                                                                                                                                                       |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- | ----------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| api.php             | This file handles requests from an embedded device, verifying a user's card ID. If the user is found, the data is sent to addCheckIn.php. If not found, it returns "No employee".                        | POST                                         | CardId (string, required) - "User's card ID".                                                   | **success** (boolean) - true if user is found, false otherwise. <br>**message** (string) - "No employee" if user not found.                                                                                                                  |
| addCheckIn.php      | This file adds a new row to the database if the user has no existing entry without an end time. If the user already has a row without an end time, it updates the end time. Handles break times as well. | POST                                         | Break (boolean, required) - true if the user is starting or ending a break, false otherwise.    | **success** (boolean) - true if the operation was successful, false otherwise. <br>**message** (string) - Description of the operation.                                                                                                      |
| getCheckInTable.php | This file retrieves all active check-ins and their associated user details.                                                                                                                              | GET                                          | -                                                                                               | -><u>Array of check-in objects:</u><br> **name** (string) - User's name. <br>**startTime** (string) - Check-in start time. <br>**curDate** (string) - Current date. <br>**curTime** (string) - Current time.                                 |
| getHistoryTable.php | This file retrieves the last ten completed check-ins with details like break times.                                                                                                                      | GET                                          | -                                                                                               | -> <u>Array of check-in objects:</u> <br>**name** (string) - User's name. <br>**startTime** (string) - Check-in start time. <br>**endTime** (string) - Check-in end time. <br>**break** (string) - Break duration if applicable, else "---". |
| getUsers.php        | This file retrieves all user data from the User table.                                                                                                                                                   | GET                                          | -                                                                                               | -><u>Array of user objects:</u><br> <br>**name** (string) - User's name. <br>**cardId** (string) - User's card ID. <br>**id** (integer) - User's ID.                                                                                         |
| deleteUsers.php     | This file deletes a user from the User table based on the provided user ID.                                                                                                                              | POST                                         | -                                                                                               | If the user is successfully deleted.                                                                                                                                                                                                         |
| addUsers.php        | This file adds a new user to the User table.                                                                                                                                                             | POST                                         | **name** (string, required) - User's name. <br>**card_id** (string, required) - User's card ID. | If the user is successfully added.                                                                                                                                                                                                           |
| proxy.php           | This file I bypass CORS restrictions.                                                                                                                                                                    | POST                                         | -                                                                                               | -                                                                                                                                                                                                                                            |
| chartsData.php      | This file gets all the data from the CheckInOut table and places it in an array full of objects.                                                                                                         | GET                                          | -                                                                                               | If the data is found.                                                                                                                                                                                                                        |
